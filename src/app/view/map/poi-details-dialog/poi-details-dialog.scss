// 1. EL COMPONENTE (:host)
:host {
    display: block;
    width: 100%;
    height: auto;
    box-sizing: border-box;
}

// 2. EL CONTENEDOR
.poi-card-container {
    display: flex;
    flex-direction: column; // Siempre en columna (estilo móvil)
    align-items: center;
    text-align: center;

    padding: 1.5rem 1rem;

    background-color: var(--color-white);
    border-radius: var(--radius-md);

    height: auto !important;
    min-height: auto !important;
    width: 100%;
    max-width: 100%;

    box-sizing: border-box;
    gap: 1rem;
    margin: 0 0 60px;

    overflow: hidden;
}

.poi-info {
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;

    flex: none !important;
    overflow: visible;
    margin-bottom: 1rem;

    .poi-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--color-black);
        margin-bottom: 0.5rem;

        white-space: normal;
        overflow: visible;
        text-overflow: clip;
    }

    .poi-coords {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.75rem;
        color: var(--mat-sys-on-surface-variant);

        .coord-row {
            display: flex;
            gap: 0.5rem;
            align-items: center;

            .label { font-weight: 500; opacity: 0.7; }
            .value { font-family: monospace; }
        }
    }
}

.poi-actions {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    flex-shrink: 0;

    width: 100%;
    justify-content: center;
    padding-bottom: 0.25rem;

    .action-btn {
        border: none;
        outline: none;
        cursor: pointer;

        width: 42px;
        height: 42px;
        border-radius: 12px;

        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease-in-out;
        background-color: var(--color-lavender);

        mat-icon { font-size: 22px; width: 22px; height: 22px; }

        &:hover {
            filter: brightness(0.8);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        &:active { transform: scale(0.95); }

        &.save-btn {
            background-color: var(--color-mint-green-light);
            mat-icon { color: var(--color-teal-dark); }
        }
        &.close-btn {
            background-color: var(--color-orange);
            mat-icon { color: var(--color-black); opacity: 0.8; }
        }
        &.next-btn {
            background-color: var(--color-lavender);
        }
    }
}

// =========================================================
// TEMA OSCURO (Corrección de Iconos)
// =========================================================
:host-context(.dark-theme) {
    .poi-card-container { background-color: var(--color-purple-dark); }

    .poi-info {
        .poi-title { color: var(--color-white); }
        .poi-coords { color: var(--color-lavender); }
    }

    .poi-actions .action-btn {
        filter: brightness(0.9);
        &:hover { filter: brightness(1.1); }

        // --- AQUÍ ESTÁ EL ARREGLO ---
        // Forzamos que el icono sea oscuro para que contraste con el fondo lavanda.
        // Usamos ::ng-deep para saltarnos la encapsulación y !important para vencer al global.
        ::ng-deep mat-icon {
            color: var(--color-purple-dark) !important;
        }

        // Excepciones: Restauramos el color correcto para Guardar y Cerrar
        &.save-btn {
            background-color: var(--color-mint-green);
            filter: brightness(1);

            ::ng-deep mat-icon { color: var(--color-teal-dark) !important; }
        }

        &.close-btn {
            filter: brightness(1);

            ::ng-deep mat-icon { color: var(--color-black) !important; }
        }
    }
}

// =========================================================
// OVERRIDES DE MATERIAL
// =========================================================
::ng-deep {
    .mat-mdc-dialog-container,
    .mat-mdc-dialog-surface {
        height: auto !important;
        max-height: none !important;
        overflow: visible !important;
        display: block !important;
    }

    .mat-mdc-dialog-content {
        max-height: none !important;
        overflow: visible !important;
        padding: 0 !important;
    }
}
